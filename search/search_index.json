{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre> <p>sdfsf</p>"},{"location":"Targets/","title":"Introducci\u00f3","text":"<p>Classe 1: Aplicacions i serveis</p> <p>man init </p> <p></p> <p></p> <p>aqui dintre teinm scripts </p> <p>ru levels </p> <p>k0 apagar equip </p> <p>anem al systemd/system</p> <p></p> <p>si anem al etc/systemd/system trobarem els mateixos fitxer pero duplicats</p> <p>aixo vol dir que al lib es troben els fitxer de la configuracio original</p> <p></p> <p></p> <p></p> <p>Graphical user depen de basic-target</p> <p></p> <p>cron apareix dins del etc </p> <p>per a canviar de forma temporal un target: systemctl isolate rescue.target</p> <p>ara de forma permanent </p> <p>cd /lib/systemd/system</p> <p>rm default.target i tornet a fer el target: ln -s graphical.target default.target</p> <p></p> <p></p> <p>mirar si esta el cron enc\u00e8s </p> <p>ara farem que estigue apagat el cron i engegat el ssh mitjan\u00e7an un enlla\u00e7</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p>si l\u2019habilitem vorem que a passat a S01 </p> <p></p> <p>Classe 2</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p>Feina per a fer:</p> <p>Creat un nou target (amb el nostre nom) \u2192dintre del nostre target: crear un servei \u2192 crear i executar un script (llliure elecci\u00f3)</p> <p>Primer creem el nostre target </p> <p>ara fem el servei  </p> <p>de primeres els dos apareixeran com \u201cdeshabilitats\u201d</p> <p></p> <p>els podem iniciar amb un systemctl enable i comprobar que existeixen</p> <p></p> <p>tambe hem d'afegir el target com a default amb la seg\u00fcent comanda </p> <p>amb aquest script podrem vore el directori del systema afectat i tambe tindrem un petit quadre que mostrara el contingut dels fitxers seleccionats</p> <p></p> <p>l\u2019escript complet estara al fitxer.py\\&lt; </p> <p></p> <p>Serveis Windows 11</p> <p>ara farem una practica similar pero amb un sistema windows 11</p> <p>\u00b7crear un nou servei \u2192 Opcio 1 nssm.exe                   \u2192Opcio 2 powershell</p> <p>\u00b7Executar un script a l\u2019inici de la sessi\u00f3 d\u2019un usuari determinat</p> <p>services.msc \u2013 automatic         automatic retardat</p> <p>primer instal\u00b7lem nssm.exe</p> <p></p> <p>Creem una carpeta que contindr\u00e0 els scripts</p> <p></p> <p>Ara crearem el servei per terminal mitjan\u00e7ant NSSM on indicarem el directori inicial i la ubicaci\u00f3 del script</p> <p></p> <p></p> <p>Comprovem que s\u2019ha creat dins de \u201cservices\u201d</p> <p></p> <p>Creaci\u00f3 \u201cmail.cred\u201d. Aix\u00f2 ho utilitzarem per automatitzar el tema d'\u00fas de credencial per al SMTP</p> <p></p> <p>Afegim les credencials, \u201caquesta credencial al final sera la contrase\u00f1a generada per google\u201d</p> <p> </p> <p>Aquest script recopila un conjunt de dades de l'equip i ho envia via SMTP</p> <p></p> <p>despr\u00e9s de l\u2019execuci\u00f3 del script podem veure al nostre correu electr\u00f2nic les dades que s\u2019han recollit  </p> <p>Nova Activitat Ubuntu</p> <p>Kernel: Es el nucli del sistema i influeix en la comunicaci\u00f3 entre el hardware i el sistema. Aquest treballa en moduls, cadascun ocupat en una tasca. La extensi\u00f3 es \u201c.KO\u201d. Hi han m\u00f2duls actius, inactius, i alguns que estan esperant al fet que s\u2019activin. Aquest s\u2019engega abans que el sistema operatiu.</p> <p>Primer mirem la versi\u00f3 que tenim de kernel</p> <p></p> <p>Visualitzem els diferents kernels </p> <p></p> <p>Ara continuarem amb les comandes</p> <p></p> <p> </p> <p>Falta la captura del kernel \u2192 reiniciar \u2192 grub avan\u00e7at \u2192 escollir versio del kernel</p> <p>Un cop fet mirem la versio del kernel </p> <p></p> <p></p> <p> </p> <p>afegim el seguent repositori </p> <p> </p> <p></p> <p>vore els moduls carregats del kernel </p> <p>vore infor del modul </p> <p>contingut del kernel </p> <p>definir moduls carregats </p> <p>comanda per a carregar un modul de forma temporal (ram) </p> <p></p>"},{"location":"Targets/#comandes","title":"Comandes:","text":""},{"location":"Ubuntu-ACDC/","title":"Documentaci\u00f3: Uni\u00f3 de Client Linux al Domini i Configuraci\u00f3 de Servidor Web Segur (HTTPS) amb IIS","text":""},{"location":"Ubuntu-ACDC/#1-configuracio-de-xarxa-i-unio-al-domini-client-ubuntu","title":"1. Configuraci\u00f3 de Xarxa i Uni\u00f3 al Domini (Client Ubuntu)","text":"<p>Objectiu: Preparar el client Linux i unir-lo al domini Active Directory.</p> <ul> <li>Verificaci\u00f3 d'IPs (P\u00e0gina 1): </li> <li>Es comprova que el client tingui dues interf\u00edcies: una per NAT (<code>enp0s3</code>) i una per a la xarxa interna (<code>enp0s8</code> amb IP <code>192.168.2.105</code>).  </li> <li>Es verifica la connectivitat amb el servidor (<code>ping 192.168.2.101</code>) i la resoluci\u00f3 DNS (<code>nslookup jordidomain.local</code>), assegurant que resolgui a la IP del servidor.</li> </ul> <p> Figura 1: Verificaci\u00f3 de les interf\u00edcies de xarxa del client Ubuntu. Es mostra <code>enp0s3</code> (NAT per internet) i <code>enp0s8</code> (xarxa interna amb IP 192.168.2.105).</p> <p> Figura 2: Comprovaci\u00f3 de connectivitat amb el servidor (<code>ping 192.168.2.101</code>) i resoluci\u00f3 DNS del domini (<code>nslookup jordidomain.local</code>).</p> <p>Execuci\u00f3 de l'Script d'Uni\u00f3 (P\u00e0gina 2-6):</p> <ul> <li>Es crea i s'executa l'script (millorat en la nostra conversa anterior com a <code>install_ad_final.sh</code>) que automatitza:  </li> <li>Configuraci\u00f3 de DNS i <code>/etc/hosts</code>.  </li> <li>Instal\u00b7laci\u00f3 de paquets (<code>sssd</code>, <code>realmd</code>, <code>samba</code>).  </li> <li>Sincronitzaci\u00f3 hor\u00e0ria (<code>ntpdate</code>).  </li> <li>Uni\u00f3 al domini usant Samba (<code>realm join</code>).  </li> <li>Configuraci\u00f3 de SSSD amb <code>access_provider = permit</code> per evitar errors de GPO.  </li> <li>Resultat: L'ordre <code>realm list</code> confirma que la m\u00e0quina est\u00e0 unida com a <code>kerberos-member</code>.</li> </ul> <p> Figura 3: Resultat de l'execuci\u00f3 de l'script d'uni\u00f3 al domini. La comanda <code>realm list</code> confirma que la m\u00e0quina est\u00e0 unida com a membre Kerberos del domini.</p> <p>El codi: #!/bin/bash</p> <p># \\============================================================================== #  SCRIPT DEFINITIVO DE UNI\u00d3N AL DOMINIO - VERSI\u00d3N \"PERMIT ALL\" #  Arregla: DNS, .local, Error Message Stream, y Error de Autorizaci\u00f3n (GPO) # \\==============================================================================</p> <p># --- [1] TUS VARIABLES (\u00a1EDITA ESTO ANTES DE EJECUTAR!) --- HOSTNAME_CLIENTE=\"cliente-nuevo\"   # Nombre de esta m\u00e1quina IP_CLIENTE=\"192.168.2.106\"         # IP de esta m\u00e1quina IF_INTERNET=\"enp0s3\"               # Tarjeta NAT IF_LAN=\"enp0s8\"                    # Tarjeta Red Interna</p> <p># --- [2] DATOS DEL SERVIDOR (NO TOCAR) --- DOMINIO=\"jordidomain.local\" DOMINIO_MAYUS=\"JORDIDOMAIN.LOCAL\" IP_SERVER=\"192.168.2.101\" NOMBRE_SERVER=\"srv-jordi\" USUARIO_ADMIN=\"Administrador\"      # \u00a1Ojo may\u00fascula!</p> <p>echo \"&gt;&gt;&gt; 1. INICIANDO CONFIGURACI\u00d3N DE CLIENTE AD...\"</p> <p># Nombre de m\u00e1quina hostnamectl set-hostname $HOSTNAME_CLIENTE</p> <p># Repositorios b\u00e1sicos apt update DEBIAN_FRONTEND=noninteractive apt install -y ntpdate net-tools nano</p> <p>echo \"&gt;&gt;&gt; 2. BLINDANDO LA RED (NETPLAN)...\" # Configuramos la red para que no pierda el DNS al reiniciar cat &gt; /etc/netplan/01-ad-config.yaml \\&lt;\\&lt;EOF network:   version: 2   renderer: networkd   ethernets:     $IF_INTERNET:       dhcp4: true     $IF_LAN:       dhcp4: no       addresses: [$IP_CLIENTE/24]       nameservers:         addresses: [$IP_SERVER, 8.8.8.8]         search: [$DOMINIO]       routes:         - to: 192.168.2.0/24           via: $IP_SERVER EOF</p> <p># Aplicar red y asegurar DNS temporal para la instalaci\u00f3n netplan apply rm -f /etc/resolv.conf echo \"nameserver $IP_SERVER\" &gt; /etc/resolv.conf echo \"nameserver 8.8.8.8\" &gt;&gt; /etc/resolv.conf</p> <p>echo \"&gt;&gt;&gt; 3. PARCHEANDO HOSTS Y NSSWITCH...\" # Arregla el fallo de ping a .local sed -i 's/mdns4_minimal \\[NOTFOUND=return\\]/dns/g' /etc/nsswitch.conf</p> <p># Arregla el fallo \"Server not found in Kerberos database\" cat &gt; /etc/hosts \\&lt;\\&lt;EOF 127.0.0.1       localhost 127.0.1.1       $HOSTNAME_CLIENTE.$DOMINIO $HOSTNAME_CLIENTE $IP_CLIENTE     $HOSTNAME_CLIENTE.$DOMINIO $HOSTNAME_CLIENTE $IP_SERVER      $NOMBRE_SERVER.$DOMINIO $NOMBRE_SERVER EOF</p> <p>echo \"&gt;&gt;&gt; 4. SINCRONIZANDO RELOJ...\" # Sin esto, Kerberos falla siempre ntpdate -u $IP_SERVER if [ $? -ne 0 ]; then     echo \"\u26a0\ufe0f AVISO: Sincronizaci\u00f3n fall\u00f3. Revisa la hora manualmente.\" fi</p> <p>echo \"&gt;&gt;&gt; 5. INSTALANDO PAQUETES AD...\" DEBIAN_FRONTEND=noninteractive apt install -y krb5-user samba sssd sssd-tools libnss-sss libpam-sss adcli realmd packagekit policykit-1 smbclient</p> <p>echo \"&gt;&gt;&gt; 6. UNIENDO AL DOMINIO (MODO SAMBA)...\" # Limpieza de intentos anteriores systemctl stop sssd rm -f /etc/krb5.keytab realm leave 2&gt;/dev/null</p> <p>echo \"-------------------------------------------------------\" echo \"INTRODUCE LA CONTRASE\u00d1A DE WINDOWS PARA: $USUARIO_ADMIN\" echo \"-------------------------------------------------------\" # Usamos Samba para evitar errores de cifrado realm join -v -U $USUARIO_ADMIN $DOMINIO --membership-software=samba</p> <p>if [ $? -ne 0 ]; then     echo \"\u274c ERROR FATAL: Fall\u00f3 la uni\u00f3n al dominio.\"     exit 1 fi</p> <p>echo \"&gt;&gt;&gt; 7. CONFIGURANDO SSSD (EL PASO CLAVE)...\" # Esta configuraci\u00f3n permite entrar sin @dominio y IGNORA las GPO cat &gt; /etc/sssd/sssd.conf \\&lt;\\&lt;EOF [sssd] domains \\= $DOMINIO config_file_version \\= 2 services \\= nss, pam</p> <p>[domain/$DOMINIO] default_shell \\= /bin/bash krb5_store_password_if_offline \\= True cache_credentials \\= True krb5_realm \\= $DOMINIO_MAYUS id_provider \\= ad fallback_homedir \\= /home/%u ad_domain \\= $DOMINIO use_fully_qualified_names \\= False ldap_id_mapping \\= True</p> <p># --- LA SOLUCI\u00d3N DEFINITIVA --- # Usamos 'permit' en lugar de 'ad' para evitar bloqueos por GPO access_provider \\= permit # ------------------------------ EOF</p> <p># Permisos obligatorios chmod 600 /etc/sssd/sssd.conf chown root:root /etc/sssd/sssd.conf</p> <p># Borrar cach\u00e9 vieja y reiniciar rm -rf /var/lib/sssd/db/* systemctl restart sssd</p> <p>echo \"&gt;&gt;&gt; 8. ACTIVANDO CARPETA HOME...\" # Esto crea la carpeta /home/usuario al entrar autom\u00e1ticamente pam-auth-update --enable mkhomedir</p> <p>echo \"==================================================\" echo \" INSTALACI\u00d3N COMPLETADA CON \u00c9XITO \" echo \"==================================================\" echo \"Prueba final: id jordi\" echo \"Si salen n\u00fameros, REINICIA y entra.\"</p> <p> Figura 4: Primera part de l'script d'automatitzaci\u00f3: definici\u00f3 de variables (hostname, IPs, domini) i configuraci\u00f3 b\u00e0sica del sistema.</p> <p> Figura 5: Configuraci\u00f3 de xarxa amb Netplan: es defineixen les interf\u00edcies NAT i LAN, incloent DNS i rutes.</p> <p> Figura 6: Configuraci\u00f3 d'SSSD amb <code>access_provider = permit</code> per evitar errors de GPO, i creaci\u00f3 autom\u00e0tica de directoris home.</p>"},{"location":"Ubuntu-ACDC/#2-installacio-de-rols-al-servidor-windows","title":"2. Instal\u00b7laci\u00f3 de Rols al Servidor Windows","text":"<p>Objectiu: Preparar el servidor per allotjar la web i gestionar certificats.</p> <ul> <li>Instal\u00b7laci\u00f3 del Servidor Web (IIS) (P\u00e0gina 7): </li> <li>Des de l'Administrador del Servidor, s'afegeix el rol \"Servidor Web (IIS)\".  </li> <li>Important: Dins de \"Seguretat\", cal marcar Autenticaci\u00f3 de Windows. Aix\u00f2 \u00e9s vital per restringir l'acc\u00e9s a usuaris del domini m\u00e9s endavant.</li> </ul> <p> Figura 7: Inici del proc\u00e9s d'instal\u00b7laci\u00f3 del rol Servidor Web (IIS) des de l'Administrador del Servidor.</p> <p> Figura 8: Selecci\u00f3 del rol Web Server (IIS) a la llista de rols disponibles.</p> <p> Figura 9: Configuraci\u00f3 de les caracter\u00edstiques d'IIS: \u00e9s cr\u00edtic marcar Windows Authentication dins de l'apartat Seguretat.</p> <p> Figura 10: Confirmaci\u00f3 final abans d'iniciar la instal\u00b7laci\u00f3 del rol IIS amb les opcions seleccionades.</p> <p>creem un nou cname \u201cwww\u201d per al server</p> <p> Figura 11: Acc\u00e9s al Gestor de DNS per crear un nou registre CNAME per al servidor web.</p> <p> Figura 12: Creaci\u00f3 del registre CNAME amb el nom \"www\" apuntant al servidor.</p> <p> Figura 13: Configuraci\u00f3 del CNAME: especificaci\u00f3 del nom complet (FQDN) del servidor de destinaci\u00f3.</p> <p> Figura 14: Verificaci\u00f3 del registre CNAME creat correctament al Gestor de DNS.</p> <ul> <li>Instal\u00b7laci\u00f3 de AD CS (P\u00e0gina 11-12): </li> <li>S'instal\u00b7la el rol \"Serveis de certificats de l'Active Directory\" (AD CS).  </li> <li>S'han de marcar els serveis de rol: Entitat de certificaci\u00f3 (Certification Authority) i Inscripci\u00f3 web d'entitat de certificaci\u00f3.</li> </ul> <p> Figura 15: Inici de la instal\u00b7laci\u00f3 del rol Active Directory Certificate Services (AD CS).</p> <p> Figura 16: Selecci\u00f3 dels serveis de rol d'AD CS: Entitat de Certificaci\u00f3 i Inscripci\u00f3 Web.</p> <p> Figura 17: Activaci\u00f3 de tots els components necessaris del rol AD CS per a una configuraci\u00f3 completa.</p> <p>abans de confiigurar aixo els certificats anirem a crear la \u201cplantilla\u201d</p> <p> Figura 18: Acc\u00e9s al gestor de plantilles de certificats per crear una nova plantilla personalitzada.</p> <p> Figura 19: Assignaci\u00f3 d'un nom descriptiu a la nova plantilla de certificat.</p> <p> Figura 20: Configuraci\u00f3 de les opcions de compatibilitat de la plantilla per assegurar el funcionament correcte.</p> <p> Figura 21: Configuraci\u00f3 de permisos per al grup Domain Computers (lectura i inscripci\u00f3).</p> <p> Figura 22: Configuraci\u00f3 de permisos per al grup Domain Admins (control total).</p> <p> Figura 23: Configuraci\u00f3 de permisos per al grup Enterprise Admins (control total).</p> <p>ara anirem a generar el fitxer de sol\u00b7licitud  Figura 24: Inici del proc\u00e9s de sol\u00b7licitud de certificat: selecci\u00f3 de \"Create custom request\".</p> <p> Figura 25: Selecci\u00f3 de la plantilla de certificat que s'ha creat pr\u00e8viament.</p> <p> Figura 26: Configuraci\u00f3 dels detalls del certificat: algorisme i mida de clau.</p> <p> Figura 27: Especificaci\u00f3 del nom com\u00fa (Common Name) del certificat.</p> <p> Figura 28: Configuraci\u00f3 del nom alternatiu del subjecte (SAN) per incloure noms addicionals.</p> <p> Figura 29: Revisi\u00f3 i confirmaci\u00f3 de tots els par\u00e0metres abans de generar la sol\u00b7licitud.</p> <p> Figura 30: Especificaci\u00f3 de la ubicaci\u00f3 on es desar\u00e0 el fitxer de sol\u00b7licitud (.req).</p> <p> Figura 31: Confirmaci\u00f3 que el fitxer de sol\u00b7licitud s'ha creat correctament.</p> <p> Figura 32: Enviament de la sol\u00b7licitud a l'entitat certificadora (Submit Request).</p> <p> Figura 33: Selecci\u00f3 del fitxer de sol\u00b7licitud previament generat.</p> <p> Figura 34: Confirmaci\u00f3 que la sol\u00b7licitud s'ha enviat i est\u00e0 pendent d'aprovaci\u00f3.</p> <p> Figura 35: Aprovaci\u00f3 manual de la sol\u00b7licitud des de la consola de l'entitat certificadora.</p> <p> Figura 36: Confirmaci\u00f3 que el certificat ha estat emis correctament.</p> <p> Figura 37: Visualitzaci\u00f3 del certificat emis a la llista de certificats emesos.</p> <p> Figura 38: Confirmaci\u00f3 final que el certificat est\u00e0 llest per ser descarregat o instal\u00b7lat.</p> <p> Figura 39: Revisi\u00f3 de les propietats del certificat abans de la instal\u00b7laci\u00f3 final.</p> <p>ara farem una sol\u00b7licitud mitjan\u00e7ant la terminal (part 8 en endavant)</p> <p> Figura 40: Obertura de PowerShell com a administrador per executar comandes de certificat.</p> <p> Figura 41: Execuci\u00f3 de la comanda <code>certreq</code> per generar el certificat a partir del fitxer de sol\u00b7licitud.</p> <p> Figura 42: Verificaci\u00f3 de la comanda executada i la seva sortida al terminal.</p> <p>resultat: Figura 43: Confirmaci\u00f3 que el certificat s'ha generat correctament i est\u00e0 disponible al sistema.</p> <p>un cop creat, instal\u00b7lem el certificat</p> <p> Figura 44: Instal\u00b7laci\u00f3 del certificat al sistema: execuci\u00f3 del fitxer .cer per importar-lo.</p> <p>ara per a utilitzar el certificat haurem de habilitat el https a la nostra web</p> <p> Figura 45: Configuraci\u00f3 d'IIS: assignaci\u00f3 del certificat al lloc web per habilitar HTTPS.</p> <p> Figura 46: Selecci\u00f3 del certificat instal\u00b7lat per al binding HTTPS (port 443) del lloc web.</p> <p>sobretot tindre en compte el tipus de authentificaci\u00f3 de la web</p> <p> Figura 47: Configuraci\u00f3 final d'autenticaci\u00f3: activaci\u00f3 de Windows Authentication i desactivaci\u00f3 d'Anonymous Authentication per restringir l'acc\u00e9s a usuaris del domini.</p>"},{"location":"Vpn/","title":"Vpnwindows","text":"<p>Aqui podriem afegir tot el proces de crear les maquines.. pero en aquest cas hem importat unes de classe.</p> <p>Primer afegim els rols de acces remot (vpn,routing)</p> <p> </p> <p>anem a personalitzar i escollim vpn i nat </p> <p>escollim l\u2019adaptador de xarxa  finalitzem </p> <p>Configurem  la nostra maquina com a servidor i ho habilitem </p> <p>Ens demanara configurar un dhcp per a les adre\u00e7es de la vpn\u2026 ara farem un apa\u00f1o </p> <p>per a evitar problemes amb les direccions i haver de configurar un dhcp ficarem un interval de adre\u00e7es est\u00e0tiques </p> <p>autoritzar acc\u00e9s a l'usuari de proves </p> <p>i el mes important es permetre l\u2019acces per xarxa </p> <p>al client configurarem la connexio per vpn a l\u2019usuari </p> <p>Ara anem a l'apartat de compartir els recursos i fer proves de funcionalitat</p> <p></p> <p>configurem el disc </p> <p>creem i configurem la carpeta del usuari</p> <p></p> <p>assignem els permisos corresponents a la carpeta  </p> <p>la compartim </p> <p>i li donem els permisos que toquen  revisem les dades de la vpn</p> <p></p> <p>i ens connectarem a ella </p> <p>Proves:</p> <p>Primer mirems els adaptadors que tenim</p> <p> com estem conectats per la vpn podrem fer ping a l\u2019interna</p> <p></p> <p>Podem vore que apareixem com a client</p> <p></p> <p>Un cop tot fet anem a vore si ens deixa entrar a la carpeta compartida per xarxa </p> <p>com estarem editant amb el usuari de xarxa de proves, tindrem control total de la carpeta </p>"},{"location":"kernel/","title":"Kernels","text":"<p>Nova Activitat Ubuntu</p> <p>Kernel: Es el nucli del sistema i influeix en la comunicaci\u00f3 entre el hardware i el sistema. Aquest treballa en moduls, cadascun ocupat en una tasca. La extensi\u00f3 es \u201c.KO\u201d. Hi han m\u00f2duls actius, inactius, i alguns que estan esperant al fet que s\u2019activin. Aquest s\u2019engega abans que el sistema operatiu.</p> <p>Captures de lo realitzat a classe:</p> <p>Primer mirem la versi\u00f3 que tenim de kernel</p> <p></p> <p>Visualitzem els diferents kernels </p> <p></p> <p>Ara continuarem amb les comandes</p> <p></p> <p> </p> <p>Falta la captura del kernel \u2192 reiniciar \u2192 grub avan\u00e7at \u2192 escollir versio del kernel</p> <p>Un cop fet mirem la versio del kernel </p> <p></p> <p></p> <p> </p> <p>afegim el seguent repositori </p> <p> </p> <p></p> <p>vore els moduls carregats del kernel </p> <p>vore infor del modul </p> <p>contingut del kernel </p> <p>definir moduls carregats </p> <p>comanda per a carregar un modul de forma temporal (ram) </p> <p></p> <p>parches de kernel</p> <p></p> <p></p> <p>fem lo parche</p> <p></p> <p>podem vore la informacio del parche amb un cat </p> <p>lo apliquem</p> <p></p> <p>comprovem que funciona</p> <p></p> <p>Practica individual de modificaci\u00f3 i compilaci\u00f3 de kernel: </p> <p></p> <p>Primer instalem els paquets necessaris </p> <p>Tamb\u00e9 depenent de la versi\u00f3 del sistema hem de descomentar unes l\u00ednies dels sources.list </p> <p>Mirem la nostra versio del kernel </p> <p>Baixem i descomprimim una versi\u00f3 m\u00e9s actualitzada </p> <p>fem una copia del ini main: cp init/main.c init/main.c.copia</p> <p>la editem </p> <p>Per exemple podem afegir un pr_notice(\u201cHola, Jordi\u201d); </p> <p>ara creem un parche </p> <p>i l\u2019apliquem al paquet del kernel </p> <p>fem un build </p> <p>podem copiar la configuraci\u00f3 del nostre kernel per si la volem recuperar m\u00e9s endavant </p> <p>amb el make old config actualitzem el fitxer de configuracio existent </p> <p>pero tambe hem de esborrar el certificats, tant el \u201ctrusted_keys\u201d com el \u201crevocation_keys\u201d </p> <p>Ara desactivarem les seg\u00fcents configuracions de debug per facilitar la compilaci\u00f3 del kernel </p> <p></p> <p>extra: podem modificar parts del kernel amb \u201cmenu config\u201d que \u00e9s la versio m\u00e9s moderna </p> <p>fem un make clean per si acas ja hav\u00edem iniciat pr\u00e8viament una compilaci\u00f3, i despres comen\u00e7em a compilar com toca </p> <p></p> <p>despres de compilar anem a la ruta dels paquets.deb generats i apliquem la seg\u00fcent comanda </p> <p>sudo dpkg -i linux-*.deb </p> <p>editem el menu del grub, tan per habilitar-lo com per a ficar un \u201ctimer\u201d mes alt</p> <p>sudo update-grub: actualitzem el grub </p> <p>fem un \u201creboot\u201d i escollim la versi\u00f3 del kernel nova dins del men\u00fa d'opcions avan\u00e7ades </p> <p>uname -r: mirem si tenim el kernel actualitzat a la versi\u00f3 corresponent </p> <p>dmesg | grep Jordi: per a vore el missatge que hem creat amb \u201cpr_\u201d</p> <p></p>"}]}